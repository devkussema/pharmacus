<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login - Pharmatina</title>

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Google Fonts: Inter -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">

    <style>
        body {
            font-family: 'Inter', sans-serif;
        }

        /* Canvas para animação de partículas */
        #particle-canvas {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 1;
        }

        .visual-content {
            position: relative;
            z-index: 2;
        }

        /* Estilo e Animação do Botão */
        .animated-gradient-btn {
            background-size: 200% auto;
            background-image: linear-gradient(to right, #14b8a6 0%, #2dd4bf 50%, #14b8a6 100%);
            transition: background-position 0.5s ease;
        }
        .animated-gradient-btn:hover {
            background-position: right center;
        }

        /* Estilização da barra de rolagem para o painel direito */
        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #f1f5f9; /* slate-100 */
        }
        .dark ::-webkit-scrollbar-track {
            background: #0f172a; /* slate-900 */
        }
        ::-webkit-scrollbar-thumb {
            background: #2dd4bf; /* teal-400 */
            border-radius: 10px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #14b8a6; /* teal-500 */
        }

        @keyframes soft-pulse-glow {
            0%, 100% { box-shadow: 0 0 15px rgba(20, 220, 190, 0.3), 0 0 20px rgba(20, 220, 190, 0.2); }
            50% { box-shadow: 0 0 25px rgba(20, 220, 190, 0.5), 0 0 35px rgba(20, 220, 190, 0.3); }
        }
        .icon-glow {
            animation: soft-pulse-glow 3.5s infinite ease-in-out;
        }
    </style>
</head>
<body class="bg-slate-100 dark:bg-slate-900 text-slate-800 dark:text-slate-200 transition-colors duration-300">

    <div class="flex min-h-screen">
        <!-- Painel Esquerdo (Visual Interativo Estático) -->
        <div class="hidden lg:flex w-1/2 items-center justify-center p-12 bg-slate-950 relative overflow-hidden">
            <canvas id="particle-canvas"></canvas>
            <div class="text-center visual-content">
                 <div class="w-48 h-48 mx-auto flex items-center justify-center rounded-3xl bg-black/30 backdrop-blur-sm border border-white/10 icon-glow">
                    <!-- Ícone de Molécula -->
                    <svg class="w-24 h-24 text-teal-400" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M12 2v2.5"/>
                        <path d="M12 19.5V22"/>
                        <path d="m4.93 4.93 1.77 1.77"/>
                        <path d="m17.3 17.3 1.77 1.77"/>
                        <path d="M2 12h2.5"/>
                        <path d="M19.5 12H22"/>
                        <path d="m4.93 19.07 1.77-1.77"/>
                        <path d="m17.3 6.7 1.77-1.77"/>
                        <circle cx="12" cy="12" r="2"/>
                        <path d="M12 14c-2.39 1.38-3 3-3 3"/>
                        <path d="M12 14c2.39 1.38 3 3 3 3"/>
                        <path d="m14.7 9.35 4.3 2.5"/>
                        <path d="M5 11.85 9.3 9.35"/>
                    </svg>
                </div>
                <h1 class="text-5xl font-extrabold mt-8 text-transparent bg-clip-text bg-gradient-to-r from-teal-300 via-cyan-400 to-emerald-400">Pharmatina</h1>
                <p class="mt-2 text-lg text-slate-400">Gestão farmacêutica inteligente e integrada.</p>
            </div>
        </div>

        <!-- Painel Direito (Formulário de Login com Multimodo) -->
        <div class="w-full lg:w-1/2 flex items-center justify-center p-6 sm:p-12">
            <div class="w-full max-w-md">

                <!-- Seletor de Tema -->
                <div class="absolute top-6 right-6 z-10">
                    <button id="theme-toggle" aria-label="Mudar tema" class="p-2 rounded-full text-slate-500 hover:bg-slate-200 dark:text-slate-400 dark:hover:bg-slate-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-teal-500 dark:focus:ring-offset-slate-900">
                        <svg id="theme-icon-light" class="w-5 h-5 hidden" fill="currentColor" viewBox="0 0 20 20"><path d="M10 2a1 1 0 011 1v1a1 1 0 11-2 0V3a1 1 0 011-1zm4 8a4 4 0 11-8 0 4 4 0 018 0zm-.464 4.95l.707.707a1 1 0 001.414-1.414l-.707-.707a1 1 0 00-1.414 1.414zm2.12-10.607a1 1 0 010 1.414l-.706.707a1 1 0 11-1.414-1.414l.707-.707a1 1 0 011.414 0zM17 11a1 1 0 100-2h-1a1 1 0 100 2h1zm-7 4a1 1 0 011 1v1a1 1 0 11-2 0v-1a1 1 0 011-1zM5.05 6.464A1 1 0 106.465 5.05l-.708-.707a1 1 0 00-1.414 1.414l.707.707zm-.707 7.072l.707-.707a1 1 0 10-1.414-1.414l-.707.707a1 1 0 001.414 1.414zM4 11a1 1 0 100-2H3a1 1 0 000 2h1z" fill-rule="evenodd" clip-rule="evenodd"></path></svg>
                        <svg id="theme-icon-dark" class="w-5 h-5 hidden" fill="currentColor" viewBox="0 0 20 20"><path d="M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z"></path></svg>
                    </button>
                    <div id="theme-announcer" class="sr-only" aria-live="polite" aria-atomic="true"></div>
                </div>

                 <div class="text-center lg:hidden mb-8">
                     <h1 class="text-3xl font-bold text-slate-800 dark:text-white">Pharmatina</h1>
                 </div>

                 <div class="relative bg-white/70 dark:bg-slate-800/50 backdrop-blur-lg p-8 rounded-2xl border border-white/30 dark:border-slate-700/50 transition-all duration-300 ease-out hover:shadow-2xl hover:shadow-teal-500/20 dark:hover:shadow-teal-400/20 hover:scale-[1.015]">
                     <!-- Overlay de Carregamento -->
                    <div id="loading-overlay" class="absolute inset-0 bg-white/80 dark:bg-slate-900/80 backdrop-blur-sm flex items-center justify-center rounded-2xl z-20 hidden">
                        <div class="w-12 h-12 border-4 border-teal-500 dark:border-teal-400 border-t-transparent rounded-full animate-spin"></div>
                    </div>

                    <h2 class="text-2xl font-bold text-slate-800 dark:text-white sm:text-3xl text-center">Acesse sua conta</h2>
                    <p class="mt-2 text-slate-500 dark:text-slate-400 text-center text-sm">Bem-vindo de volta!</p>

                    <form class="mt-8 space-y-6" id="loginForm">
                        <div>
                            <label for="email" class="text-sm font-medium text-slate-700 dark:text-slate-300">E-mail</label>
                            <div class="mt-1">
                                <input id="email" name="email" type="email" autocomplete="email" required class="w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md placeholder-slate-400 dark:placeholder-slate-500 bg-white/50 dark:bg-slate-700/50 focus:outline-none focus:ring-2 focus:ring-teal-500 focus:border-teal-500 transition">
                            </div>
                        </div>

                        <div>
                            <label for="password" class="text-sm font-medium text-slate-700 dark:text-slate-300">Senha</label>
                            <div class="mt-1 relative">
                                <input id="password" name="password" type="password" autocomplete="current-password" required class="w-full px-3 py-2 pr-10 border border-slate-300 dark:border-slate-600 rounded-md placeholder-slate-400 dark:placeholder-slate-500 bg-white/50 dark:bg-slate-700/50 focus:outline-none focus:ring-2 focus:ring-teal-500 focus:border-teal-500 transition">
                                <button type="button" id="password-toggle" class="absolute inset-y-0 right-0 px-3 flex items-center text-slate-500 dark:text-slate-400">
                                    <svg id="eye-open" class="h-5 w-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"></path></svg>
                                    <svg id="eye-closed" class="h-5 w-5 hidden" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.542-7 .525-1.666 1.39-3.153 2.458-4.333m7.084-2.344A10.053 10.053 0 0112 5c4.478 0 8.268 2.943 9.542 7a10.053 10.053 0 01-1.133 3.175m-1.44-1.44A3 3 0 1012 12.01a3.001 3.001 0 00-1.415.366m-3.17-2.48a3 3 0 00-3.17 2.48m5.585 5.585A3 3 0 018.83 8.83M15 15l-6-6"></path></svg>
                                </button>
                            </div>
                        </div>

                        <div class="flex items-center justify-between text-sm">
                             <a href="#" class="font-medium text-teal-600 hover:text-teal-500 dark:text-teal-400 dark:hover:text-teal-300">
                                Esqueceu a senha?
                            </a>
                        </div>

                        <div id="feedback-message" class="hidden text-center p-3 rounded-md text-sm"></div>

                        <div>
                            <button type="submit" class="group relative w-full flex justify-center py-3 px-4 border border-transparent text-sm font-semibold rounded-md text-white animated-gradient-btn focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-teal-500 dark:focus:ring-offset-slate-900 disabled:opacity-75 disabled:scale-100">
                                Entrar
                            </button>
                        </div>
                    </form>
                 </div>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // --- Lógica do Seletor de Tema ---
            const themeToggleBtn = document.getElementById('theme-toggle');
            const themeIconLight = document.getElementById('theme-icon-light');
            const themeIconDark = document.getElementById('theme-icon-dark');
            const htmlEl = document.documentElement;
            const themeAnnouncer = document.getElementById('theme-announcer');
            let currentThemeForAnnouncement = ''; // Usado para evitar anunciar a configuração inicial do tema

            const applyTheme = (theme, isInitialLoad = false) => {
                if (theme === 'dark') {
                    htmlEl.classList.add('dark');
                    themeIconLight.classList.remove('hidden');
                    themeIconDark.classList.add('hidden');
                    themeToggleBtn.setAttribute('aria-label', 'Mudar para tema claro');
                } else {
                    htmlEl.classList.remove('dark');
                    themeIconLight.classList.add('hidden');
                    themeIconDark.classList.remove('hidden');
                    themeToggleBtn.setAttribute('aria-label', 'Mudar para tema escuro');
                }

                // Anuncia a mudança de tema apenas se não for o carregamento inicial e o tema realmente mudou
                if (!isInitialLoad && themeAnnouncer && theme !== currentThemeForAnnouncement) {
                    themeAnnouncer.textContent = `Tema alterado para ${theme === 'dark' ? 'escuro' : 'claro'}.`;
                } else if (isInitialLoad && themeAnnouncer) {
                    themeAnnouncer.textContent = ''; // Limpa o anunciador no carregamento inicial
                }
                currentThemeForAnnouncement = theme; // Atualiza o tema atual para a lógica de anúncio
            };

            // Inicializa o tema no carregamento da página
            const savedTheme = localStorage.getItem('theme') || (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light');
            applyTheme(savedTheme, true); // true indica que é o carregamento inicial

            themeToggleBtn.addEventListener('click', () => {
                const newTheme = htmlEl.classList.contains('dark') ? 'light' : 'dark';
                localStorage.setItem('theme', newTheme);
                applyTheme(newTheme, false); // false indica que não é o carregamento inicial
            });

            // --- Lógica do Formulário de Login ---
            const loginForm = document.getElementById('loginForm');
            const feedbackMessage = document.getElementById('feedback-message');
            const loadingOverlay = document.getElementById('loading-overlay');

            loginForm.addEventListener('submit', (e) => {
                e.preventDefault();
                const email = document.getElementById('email').value;
                const passwordInput = document.getElementById('password');
                const inputs = loginForm.querySelectorAll('input');
                const button = loginForm.querySelector('button[type="submit"]');

                feedbackMessage.className = 'hidden text-center p-3 rounded-md text-sm';

                if(!email || !passwordInput.value) {
                     feedbackMessage.textContent = 'Por favor, preencha todos os campos.';
                     feedbackMessage.classList.add('bg-red-100', 'text-red-800', 'dark:bg-red-900/50', 'dark:text-red-300');
                     feedbackMessage.classList.remove('hidden');
                     return;
                }

                loadingOverlay.classList.remove('hidden');
                inputs.forEach(input => input.disabled = true);
                button.disabled = true;

                setTimeout(() => {
                    loadingOverlay.classList.add('hidden');
                    inputs.forEach(input => input.disabled = false);
                    button.disabled = false;
                    feedbackMessage.textContent = 'Login bem-sucedido! Redirecionando...';
                    feedbackMessage.classList.add('bg-green-100', 'text-green-800', 'dark:bg-green-900/50', 'dark:text-green-300');
                    feedbackMessage.classList.remove('hidden');
                }, 2000);
            });

            // --- Lógica de Visualização da Senha ---
            const passwordToggle = document.getElementById('password-toggle');
            const passwordInput = document.getElementById('password');
            const eyeOpen = document.getElementById('eye-open');
            const eyeClosed = document.getElementById('eye-closed');

            passwordToggle.addEventListener('click', () => {
                if (passwordInput.type === 'password') {
                    passwordInput.type = 'text';
                    eyeOpen.classList.add('hidden');
                    eyeClosed.classList.remove('hidden');
                } else {
                    passwordInput.type = 'password';
                    eyeOpen.classList.remove('hidden');
                    eyeClosed.classList.add('hidden');
                }
            });

            // --- Lógica da Animação de Partículas ---
            const canvas = document.getElementById('particle-canvas');
            if (canvas) {
                const ctx = canvas.getContext('2d');
                let particles = [];
                let mouse = { x: null, y: null, radius: 100 };

                const setCanvasSize = () => {
                    canvas.width = canvas.offsetWidth;
                    canvas.height = canvas.offsetHeight;
                };

                window.addEventListener('resize', () => {
                    setCanvasSize();
                    initParticles();
                });

                canvas.addEventListener('mousemove', (event) => {
                    const rect = canvas.getBoundingClientRect();
                    mouse.x = event.clientX - rect.left;
                    mouse.y = event.clientY - rect.top;
                });

                canvas.addEventListener('mouseleave', () => {
                    mouse.x = null;
                    mouse.y = null;
                });

                class Particle {
                    constructor(x, y, directionX, directionY, size, color) {
                        this.x = x;
                        this.y = y;
                        this.directionX = directionX;
                        this.directionY = directionY;
                        this.size = size;
                        this.color = color;
                    }
                    draw() {
                        ctx.beginPath();
                        ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2, false);
                        ctx.fillStyle = this.color;
                        ctx.fill();
                    }
                    update() {
                        if (this.x > canvas.width || this.x < 0) this.directionX = -this.directionX;
                        if (this.y > canvas.height || this.y < 0) this.directionY = -this.directionY;

                        let dx = mouse.x - this.x;
                        let dy = mouse.y - this.y;
                        let distance = Math.sqrt(dx * dx + dy * dy);
                        if (distance < mouse.radius + this.size) {
                            if (mouse.x < this.x && this.x < canvas.width - this.size * 10) this.x += 3;
                            if (mouse.x > this.x && this.x > this.size * 10) this.x -= 3;
                            if (mouse.y < this.y && this.y < canvas.height - this.size * 10) this.y += 3;
                            if (mouse.y > this.y && this.y > this.size * 10) this.y -= 3;
                        }

                        this.x += this.directionX;
                        this.y += this.directionY;
                        this.draw();
                    }
                }

                const initParticles = () => {
                    particles = [];
                    let numberOfParticles = (canvas.height * canvas.width) / 9000;
                    for (let i = 0; i < numberOfParticles; i++) {
                        let size = (Math.random() * 2) + 1;
                        let x = (Math.random() * ((canvas.width - size * 2) - (size * 2)) + size * 2);
                        let y = (Math.random() * ((canvas.height - size * 2) - (size * 2)) + size * 2);
                        let directionX = (Math.random() * .4) - .2;
                        let directionY = (Math.random() * .4) - .2;
                        let color = 'rgba(20, 240, 210, 0.6)'; // Cor ajustada para partículas (mais vibrante)
                        particles.push(new Particle(x, y, directionX, directionY, size, color));
                    }
                };

                const connectParticles = () => {
                    let opacityValue = 1;
                    for (let a = 0; a < particles.length; a++) {
                        for (let b = a; b < particles.length; b++) {
                            let distance = ((particles[a].x - particles[b].x) * (particles[a].x - particles[b].x))
                                         + ((particles[a].y - particles[b].y) * (particles[a].y - particles[b].y));
                            if (distance < (canvas.width / 7) * (canvas.height / 7)) {
                                opacityValue = 1 - (distance / 20000);
                                let color = 'rgba(20, 240, 210,' + opacityValue * 0.7 + ')'; // Cor ajustada para linhas (mais vibrante e sutil)
                                ctx.strokeStyle = color;
                                ctx.lineWidth = 1;
                                ctx.beginPath();
                                ctx.moveTo(particles[a].x, particles[a].y);
                                ctx.lineTo(particles[b].x, particles[b].y);
                                ctx.stroke();
                            }
                        }
                    }
                };

                const animate = () => {
                    requestAnimationFrame(animate);
                    ctx.clearRect(0, 0, canvas.width, canvas.height);
                    for (let i = 0; i < particles.length; i++) {
                        particles[i].update();
                    }
                    connectParticles();
                };

                setCanvasSize();
                initParticles();
                animate();
            }
        });
    </script>
</body>
</html>
